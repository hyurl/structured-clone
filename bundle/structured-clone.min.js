!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.StructuredClone=r():e.StructuredClone=r()}(this,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=2)}([function(e,r,t){const n=t(5).default,o=t(1).default;var u;try{u=t(6).AssertionError}catch(e){}r.error2object=function(e){return Object.assign(n(e,["name","message","stack"]),e)},r.object2error=function(e){let r,t=["name","message","stack"];r="AssertionError"===e.name&&u?Object.create(u.prototype):Object.create((o(e.name)||Error).prototype);Object.defineProperties(r,{message:{value:e.message,configurable:!0,writable:!0},stack:{value:e.stack,configurable:!0,writable:!0}});for(let n in e)t.includes(n)||(r[n]=e[n]);return r},r.walkToJSON=function(e){for(;null!=e&&"function"==typeof e.toJSON;)e=e.toJSON();return e}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){let r;return"object"==typeof self?r=self:"object"==typeof global?r=global:"object"==typeof window&&(r=window),r&&(e?r[e]:r)}},function(e,r,t){t(3);const{createComposer:n}=t(4),{createDecomposer:o}=t(7),u=/^\[\[[A-Z][a-zA-Z0-9_]+\]\]$/;Object.assign(r,{createComposer:n,createDecomposer:o}),r.compose=r.clone=n((e,r)=>[`[[${e}]]`,r]),r.decompose=r.declone=o(e=>({type:String(e[0]).slice(2,-2),value:e[1]}),e=>Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&u.test(e[0])),r.serialize=function(e){return JSON.stringify(r.compose(e))},r.deserialize=function(e){return r.decompose(JSON.parse(e))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},function(e,r,t){const{error2object:n,object2error:o,walkToJSON:u}=t(0);r.createComposer=function(e){return function r(t,a=!1,i=[]){let c=typeof t;if("function"!==c||a||(c=typeof(t=u(t))),null==t||"function"===c||"symbol"===c)return null===t?null:void 0;if("bigint"===c)return a?t:e("BigInt",String(t));if("number"===c)return isNaN(t)||!isFinite(t)?a?t:e("Number",String(t)):t;if("object"===c){if(i.includes(t))return;if(t instanceof Boolean)return a?t:e("Boolean",t.valueOf());if(t instanceof Number)return a?t:e("Number",t.valueOf());if(t instanceof String)return a?t:e("String",t.valueOf());if(t instanceof Date)return a?t:e("Date",t.toISOString());if(t instanceof RegExp)return a?t:e("RegExp",String(t));if(t instanceof ArrayBuffer)return a?t:e("ArrayBuffer",[...new Uint8Array(t)]);if(t instanceof DataView)return a?t:e("DataView",[...new Uint8Array(t.buffer)]);if(ArrayBuffer.isView(t))return a?t:e(t.constructor.name,[...t]);if(t instanceof Map){let n=a?new Map:[];return t.forEach((e,o)=>{void 0!==(o=r(o,a,[...i,t]))&&(e=r(e,a,[...i,t]),a?n.set(o,e):n.push([o,e]))}),a?n:e("Map",n)}if(t instanceof Set){let n=a?new Set:[];return t.forEach(e=>{void 0!==(e=r(e,a,[...i,t]))&&(a?n.add(e):n.push(e))}),a?n:e("Set",n)}if(t instanceof Error)return t=r(n(t),a,[...i,t]),a?o(t):e("Error",t);if(a||"object"==typeof(t=u(t))){if(Array.isArray(t))return t.map(e=>r(e,a,[...i,t]));{let e=Object.getPrototypeOf(t);return a&&null!==e&&e!==Object.prototype?t:Object.keys(t).reduce((e,n)=>{let o=r(t[n],a,[...i,t]);return void 0!==o&&(e[n]=o),e},{})}}return r(t,a,[...i,t])}return t}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){return Array.isArray(e)?r.map(r=>e[r]):r.reduce((r,t)=>(t in e&&(r[t]=e[t]),r),{})}},function(e,r){e.exports=require("assert")},function(e,r,t){const n=t(1).default,{object2error:o}=t(0),u=["NaN","Infinity","-Infinity"];r.createDecomposer=function(e,r){return function t(a){if("object"!=typeof a||null===a)return a;if(!r(a))return Array.isArray(a)?a.map(t):Object.keys(a).reduce((e,r)=>(e[r]=t(a[r]),e),{});{let{type:r,value:i}=e(a);try{switch(r){case"Boolean":return new Boolean(i);case"Number":return u.includes(i)?Number(i):new Number(i);case"BigInt":return BigInt(i);case"String":return new String(i);case"Date":return new Date(i);case"RegExp":{let e=i.lastIndexOf("/"),r=i.slice(1,e),t=i.slice(e+1);return new RegExp(r,t)}case"Map":return new Map(t(i));case"Set":return new Set(t(i));case"Error":return o(i);case"ArrayBuffer":return Uint8Array.from(i).buffer;case"DataView":return new DataView(Uint8Array.from(i).buffer);case"Buffer":return"function"==typeof Buffer?Buffer.from(i):Uint8Array.from(i);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"BigInt64Array":case"BigUint64Array":case"Float32Array":case"Float64Array":return n(r).from(i);default:return a}}catch(e){return a}}}}}])}));
//# sourceMappingURL=structured-clone.min.js.map
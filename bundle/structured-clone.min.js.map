{"version":3,"sources":["webpack://StructuredClone/webpack/universalModuleDefinition","webpack://StructuredClone/webpack/bootstrap","webpack://StructuredClone/./lib/utils.js","webpack://StructuredClone/./node_modules/@hyurl/utils/getGlobal.js","webpack://StructuredClone/./lib/index.js","webpack://StructuredClone/./node_modules/@hyurl/utils/types.js","webpack://StructuredClone/./lib/compose.js","webpack://StructuredClone/./node_modules/@hyurl/utils/pick.js","webpack://StructuredClone/external \"assert\"","webpack://StructuredClone/./lib/decompose.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pick","default","getGlobal","AssertionError","e","error2object","err","assign","object2error","obj","reservedKeys","Error","defineProperties","message","configurable","writable","stack","x","includes","walkToJSON","data","toJSON","prop","_global","self","global","window","createComposer","createDecomposer","TypePattern","compose","clone","type","decompose","declone","String","slice","Array","isArray","length","test","serialize","JSON","stringify","deserialize","json","parse","make","forHTML","parents","isNaN","isFinite","Boolean","valueOf","Number","Date","toISOString","RegExp","ArrayBuffer","Uint8Array","DataView","buffer","isView","constructor","Map","map","forEach","undefined","set","push","Set","add","item","proto","getPrototypeOf","keys","reduce","props","result","require","NumberKeywords","checkSignature","BigInt","index","lastIndexOf","pattern","flags","from","Buffer"],"mappings":"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","file":"structured-clone.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StructuredClone\"] = factory();\n\telse\n\t\troot[\"StructuredClone\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","const pick = require(\"@hyurl/utils/pick\").default;\nconst getGlobal = require(\"@hyurl/utils/getGlobal\").default;\n\n/** @typedef {Error & { [x: string]: any }} ErrorObject */\n\n/** @type {ErrorObject} */\nvar AssertionError;\n\n// For Node.js-like environment.\nif (typeof require === \"function\" && typeof module === \"object\") {\n    try {\n        AssertionError = require(\"assert\").AssertionError;\n    } catch (e) { }\n}\n\nexports.error2object = error2object;\n/**\n * @param {ErrorObject} err\n * @returns {ErrorObject}\n */\nfunction error2object(err) {\n    return Object.assign(pick(err, [\"name\", \"message\", \"stack\"]), err);\n}\n\nexports.object2error = object2error;\n/**\n * @param {ErrorObject} obj\n * @returns {ErrorObject}\n */\nfunction object2error(obj) {\n    let reservedKeys = [\"name\", \"message\", \"stack\"];\n    let err;\n\n    if (obj.name === \"AssertionError\" && AssertionError) {\n        err = Object.create(AssertionError.prototype);\n    } else {\n        err = Object.create((getGlobal(obj.name) || Error).prototype);\n    }\n\n    Object.defineProperties(err, {\n        message: {\n            value: obj.message,\n            configurable: true,\n            writable: true\n        },\n        stack: {\n            value: obj.stack,\n            configurable: true,\n            writable: true\n        }\n    });\n\n    for (let x in obj) {\n        if (!reservedKeys.includes(x)) {\n            err[x] = obj[x];\n        }\n    }\n\n    return err;\n}\n\nexports.walkToJSON = walkToJSON;\nfunction walkToJSON(data) {\n    // Recursively calls `toJSON()` method(s) until drain.\n    while (data !== null\n        && data !== void 0\n        && typeof data[\"toJSON\"] === \"function\"\n    ) {\n        data = data.toJSON();\n    }\n\n    return data;\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getGlobal(prop = void 0) {\n    let _global;\n    if (typeof self === \"object\") {\n        _global = self;\n    }\n    else if (typeof global === \"object\") {\n        _global = global;\n    }\n    else if (typeof window === \"object\") {\n        _global = window;\n    }\n    return _global && (prop ? _global[prop] : _global);\n}\nexports.default = getGlobal;\n//# sourceMappingURL=getGlobal.js.map","require(\"@hyurl/utils/types\");\nconst { createComposer } = require(\"./compose\");\nconst { createDecomposer } = require(\"./decompose\");\nconst TypePattern = /^\\[\\[[A-Z][a-zA-Z0-9_]+\\]\\]$/;\n\nObject.assign(exports, {\n    createComposer,\n    createDecomposer\n});\n\nexports.compose = exports.clone = createComposer((type, value) => {\n    return [`[[${type}]]`, value];\n});\n\nexports.decompose = exports.declone = createDecomposer((data) => {\n    return {\n        type: String(data[0]).slice(2, -2),\n        value: data[1]\n    };\n}, (data) => {\n    return Array.isArray(data)\n        && data.length === 2\n        && typeof data[0] === \"string\"\n        && TypePattern.test(data[0]);\n});\n\nexports.serialize = function serialize(data) {\n    return JSON.stringify(exports.compose(data));\n};\n\nexports.deserialize = function deserialize(json) {\n    return exports.decompose(JSON.parse(json));\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map","const { error2object, object2error, walkToJSON } = require(\"./utils\");\n\n/**\n * @param {(type: string, value: any) => any} make \n */\nexports.createComposer = function (make) {\n    return function compose(data, forHTML = false, parents = []) {\n        let type = typeof data;\n\n        if (type === \"function\" && !forHTML) {\n            data = walkToJSON(data);\n            type = typeof data;\n        }\n\n        if (data === null || data === undefined ||\n            type === \"function\" || type === \"symbol\") {\n            return data === null ? null : void 0;\n        }\n\n        if (type === \"bigint\") {\n            return forHTML ? data : make(\"BigInt\", String(data));\n        } else if (type === \"number\") {\n            if (isNaN(data) || !isFinite(data)) {\n                return forHTML ? data : make(\"Number\", String(data));\n            } else {\n                return data;\n            }\n        } else if (type === \"object\") {\n            if (parents.includes(data)) {\n                return void 0; // skip circular reference\n            }\n\n            if (data instanceof Boolean) {\n                return forHTML ? data : make(\"Boolean\", data.valueOf());\n            } else if (data instanceof Number) {\n                return forHTML ? data : make(\"Number\", data.valueOf());\n            } else if (data instanceof String) {\n                return forHTML ? data : make(\"String\", data.valueOf());\n            } else if (data instanceof Date) {\n                return forHTML ? data : make(\"Date\", data.toISOString());\n            } else if (data instanceof RegExp) {\n                return forHTML ? data : make(\"RegExp\", String(data));\n            } else if (data instanceof ArrayBuffer) {\n                return forHTML ? data : make(\"ArrayBuffer\", [...new Uint8Array(data)]);\n            } else if (data instanceof DataView) {\n                return forHTML ? data : make(\"DataView\", [...new Uint8Array(data.buffer)]);\n            } else if (ArrayBuffer.isView(data)) {\n                return forHTML ? data : make(data.constructor.name, [...data]);\n            } else if (data instanceof Map) {\n                let map = forHTML ? new Map() : [];\n\n                data.forEach((value, key) => {\n                    key = compose(key, forHTML, [...parents, data]);\n\n                    if (key !== undefined) {\n                        value = compose(value, forHTML, [...parents, data]);\n                        forHTML ? map.set(key, value) : map.push([key, value]);\n                    }\n                });\n\n                return forHTML ? map : make(\"Map\", map);\n            } else if (data instanceof Set) {\n                let set = forHTML ? new Set() : [];\n\n                data.forEach((value) => {\n                    value = compose(value, forHTML, [...parents, data]);\n\n                    if (value !== undefined) {\n                        forHTML ? set.add(value) : set.push(value);\n                    }\n                });\n\n                return forHTML ? set : make(\"Set\", set);\n            } else if (data instanceof Error) {\n                data = compose(error2object(data), forHTML, [...parents, data]);\n                return forHTML ? object2error(data) : make(\"Error\", data);\n            } else if (!forHTML && typeof (data = walkToJSON(data)) !== \"object\") {\n                return compose(data, forHTML, [...parents, data]);\n            } else if (Array.isArray(data)) {\n                return data.map(item => compose(item, forHTML, [...parents, data]));\n            } else {\n                let proto = Object.getPrototypeOf(data);\n\n                if (!forHTML || proto === null || proto === Object.prototype) {\n                    return Object.keys(data).reduce((obj, key) => {\n                        let value = compose(data[key], forHTML, [...parents, data]);\n                        value !== undefined && (obj[key] = value);\n                        return obj;\n                    }, {});\n                } else {\n                    return data;\n                }\n            }\n        }\n\n        return data;\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction pick(obj, props) {\n    if (Array.isArray(obj)) {\n        return props.map(i => obj[i]);\n    }\n    else {\n        return props.reduce((result, prop) => {\n            prop in obj && (result[prop] = obj[prop]);\n            return result;\n        }, {});\n    }\n}\nexports.default = pick;\n//# sourceMappingURL=pick.js.map","module.exports = require(\"assert\");","const getGlobal = require(\"@hyurl/utils/getGlobal\").default;\nconst { object2error } = require(\"./utils\");\nconst NumberKeywords = [\"NaN\", \"Infinity\", \"-Infinity\"];\n\n/**\n * @param {(data: any) => { type: string, value: any }} parse \n * @param {(data: any) => boolean} checkSignature\n */\nexports.createDecomposer = function (parse, checkSignature) {\n    return function decompose(data) {\n        if (typeof data !== \"object\" || data === null) {\n            return data;\n        } else if (checkSignature(data)) {\n            let { type, value } = parse(data);\n\n            try {\n                switch (type) {\n                    case \"Boolean\":\n                        return new Boolean(value);\n\n                    case \"Number\":\n                        return NumberKeywords.includes(value)\n                            ? Number(value)\n                            : new Number(value);\n\n                    case \"BigInt\":\n                        return BigInt(value);\n\n                    case \"String\":\n                        return new String(value);\n\n                    case \"Date\":\n                        return new Date(value);\n\n                    case \"RegExp\": {\n                        let index = value.lastIndexOf(\"/\");\n                        let pattern = value.slice(1, index);\n                        let flags = value.slice(index + 1);\n                        return new RegExp(pattern, flags);\n                    }\n\n                    case \"Map\":\n                        return new Map(decompose(value));\n\n                    case \"Set\":\n                        return new Set(decompose(value));\n\n                    case \"Error\":\n                        return object2error(value);\n\n                    case \"ArrayBuffer\":\n                        return Uint8Array.from(value).buffer;\n\n                    case \"DataView\":\n                        return new DataView(Uint8Array.from(value).buffer);\n\n                    case \"Buffer\": {\n                        if (typeof Buffer === \"function\") {\n                            return Buffer.from(value);\n                        } else {\n                            // For browsers, transfer Node.js Buffer into\n                            // Uint8Array.\n                            return Uint8Array.from(value);\n                        }\n                    }\n\n                    case \"Int8Array\":\n                    case \"Uint8Array\":\n                    case \"Uint8ClampedArray\":\n                    case \"Int16Array\":\n                    case \"Uint16Array\":\n                    case \"Int32Array\":\n                    case \"Uint32Array\":\n                    case \"BigInt64Array\":\n                    case \"BigUint64Array\":\n                    case \"Float32Array\":\n                    case \"Float64Array\":\n                        return getGlobal(type).from(value);\n\n                    default:\n                        return data;\n                }\n            } catch (e) {\n                // If failed to decompose, return the data as-is.\n                return data;\n            }\n        } else if (Array.isArray(data)) {\n            return data.map(decompose);\n        } else {\n            return Object.keys(data).reduce((obj, key) => {\n                obj[key] = decompose(data[key]);\n                return obj;\n            }, {});\n        }\n    }\n}"],"sourceRoot":""}
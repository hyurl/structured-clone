{"version":3,"sources":["webpack://StructuredClone/webpack/universalModuleDefinition","webpack://StructuredClone/webpack/bootstrap","webpack://StructuredClone/./lib/utils.js","webpack://StructuredClone/./node_modules/@hyurl/utils/getGlobal.js","webpack://StructuredClone/./lib/index.js","webpack://StructuredClone/./node_modules/@hyurl/utils/types.js","webpack://StructuredClone/./lib/compose.js","webpack://StructuredClone/./node_modules/@hyurl/utils/pick.js","webpack://StructuredClone/external \"assert\"","webpack://StructuredClone/./lib/decompose.js","webpack://StructuredClone/./node_modules/@hyurl/utils/typeOf.js","webpack://StructuredClone/./node_modules/@hyurl/utils/isVoid.js","webpack://StructuredClone/./node_modules/could-be-class/index.js","webpack://StructuredClone/./node_modules/@hyurl/utils/keysOf.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pick","default","getGlobal","AssertionError","e","error2object","err","assign","object2error","obj","reservedKeys","Error","defineProperties","message","configurable","writable","stack","x","includes","walkToJSON","data","toJSON","prop","_global","globalThis","self","global","window","createComposer","createDecomposer","TypePattern","compose","clone","type","decompose","declone","String","slice","Array","isArray","length","test","serialize","JSON","stringify","deserialize","json","parse","make","forHTML","parents","isNaN","isFinite","Boolean","valueOf","Number","Date","toISOString","RegExp","ArrayBuffer","Uint8Array","DataView","buffer","isView","constructor","Map","map","forEach","undefined","set","push","Set","add","item","proto","getPrototypeOf","keys","reduce","props","result","require","typeOf","keysOf","NumberKeywords","checkSignature","BigInt","index","lastIndexOf","pattern","flags","from","Buffer","isVoid_1","could_be_class_1","target","arguments","TypeError","toString","is","NaN","couldBeClass","getOwnPropertyNames","str","hasThis","Reflect","ownKeys"],"mappings":"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","file":"structured-clone.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StructuredClone\"] = factory();\n\telse\n\t\troot[\"StructuredClone\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","const pick = require(\"@hyurl/utils/pick\").default;\nconst getGlobal = require(\"@hyurl/utils/getGlobal\").default;\n\n/** @typedef {Error & { [x: string]: any }} ErrorObject */\n\n/** @type {ErrorObject} */\nvar AssertionError;\n\n// For Node.js-like environment.\nif (typeof require === \"function\" && typeof module === \"object\") {\n    try {\n        AssertionError = require(\"assert\").AssertionError;\n    } catch (e) { }\n}\n\nexports.error2object = error2object;\n/**\n * @param {ErrorObject} err\n * @returns {ErrorObject}\n */\nfunction error2object(err) {\n    return Object.assign(pick(err, [\"name\", \"message\", \"stack\"]), err);\n}\n\nexports.object2error = object2error;\n/**\n * @param {ErrorObject} obj\n * @returns {ErrorObject}\n */\nfunction object2error(obj) {\n    let reservedKeys = [\"name\", \"message\", \"stack\"];\n    let err;\n\n    if (obj.name === \"AssertionError\" && AssertionError) {\n        err = Object.create(AssertionError.prototype);\n    } else {\n        err = Object.create((getGlobal(obj.name) || Error).prototype);\n    }\n\n    Object.defineProperties(err, {\n        message: {\n            value: obj.message,\n            configurable: true,\n            writable: true\n        },\n        stack: {\n            value: obj.stack,\n            configurable: true,\n            writable: true\n        }\n    });\n\n    for (let x in obj) {\n        if (!reservedKeys.includes(x)) {\n            err[x] = obj[x];\n        }\n    }\n\n    return err;\n}\n\nexports.walkToJSON = walkToJSON;\nfunction walkToJSON(data) {\n    // Recursively calls `toJSON()` method(s) until drain.\n    while (data !== null\n        && data !== void 0\n        && typeof data[\"toJSON\"] === \"function\"\n    ) {\n        data = data.toJSON();\n    }\n\n    return data;\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getGlobal(prop = void 0) {\n    let _global;\n    if (typeof globalThis === \"object\") {\n        _global = globalThis;\n    }\n    else if (typeof self === \"object\") {\n        _global = self;\n    }\n    else if (typeof global === \"object\") {\n        _global = global;\n    }\n    else if (typeof window === \"object\") {\n        _global = window;\n    }\n    return _global && (prop ? _global[prop] : _global);\n}\nexports.default = getGlobal;\n//# sourceMappingURL=getGlobal.js.map","require(\"@hyurl/utils/types\");\nconst { createComposer } = require(\"./compose\");\nconst { createDecomposer } = require(\"./decompose\");\nconst TypePattern = /^\\[\\[[A-Z][a-zA-Z0-9_]+\\]\\]$/;\n\nObject.assign(exports, {\n    createComposer,\n    createDecomposer\n});\n\nexports.compose = exports.clone = createComposer((type, value) => {\n    return [`[[${type}]]`, value];\n});\n\nexports.decompose = exports.declone = createDecomposer((data) => {\n    return {\n        type: String(data[0]).slice(2, -2),\n        value: data[1]\n    };\n}, (data) => {\n    return Array.isArray(data)\n        && data.length === 2\n        && typeof data[0] === \"string\"\n        && TypePattern.test(data[0]);\n});\n\nexports.serialize = function serialize(data) {\n    return JSON.stringify(exports.compose(data));\n};\n\nexports.deserialize = function deserialize(json) {\n    return exports.decompose(JSON.parse(json));\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map","const { error2object, object2error, walkToJSON } = require(\"./utils\");\n\n/**\n * @param {(type: string, value: any) => any} make \n */\nexports.createComposer = function (make) {\n    return function compose(data, forHTML = false, parents = []) {\n        let type = typeof data;\n\n        if (type === \"function\" && !forHTML) {\n            data = walkToJSON(data);\n            type = typeof data;\n        }\n\n        if (data === null || data === undefined ||\n            type === \"function\" || type === \"symbol\") {\n            return data === null ? null : void 0;\n        }\n\n        if (type === \"bigint\") {\n            return forHTML ? data : make(\"BigInt\", String(data));\n        } else if (type === \"number\") {\n            if (isNaN(data) || !isFinite(data)) {\n                return forHTML ? data : make(\"Number\", String(data));\n            } else {\n                return data;\n            }\n        } else if (type === \"object\") {\n            if (parents.includes(data)) {\n                return void 0; // skip circular reference\n            }\n\n            if (data instanceof Boolean) {\n                return forHTML ? data : make(\"Boolean\", data.valueOf());\n            } else if (data instanceof Number) {\n                return forHTML ? data : make(\"Number\", data.valueOf());\n            } else if (data instanceof String) {\n                return forHTML ? data : make(\"String\", data.valueOf());\n            } else if (data instanceof Date) {\n                return forHTML ? data : make(\"Date\", data.toISOString());\n            } else if (data instanceof RegExp) {\n                return forHTML ? data : make(\"RegExp\", String(data));\n            } else if (data instanceof ArrayBuffer) {\n                return forHTML ? data : make(\"ArrayBuffer\", [...new Uint8Array(data)]);\n            } else if (data instanceof DataView) {\n                return forHTML ? data : make(\"DataView\", [...new Uint8Array(data.buffer)]);\n            } else if (ArrayBuffer.isView(data)) {\n                return forHTML ? data : make(data.constructor.name, [...data]);\n            } else if (data instanceof Map) {\n                let map = forHTML ? new Map() : [];\n\n                data.forEach((value, key) => {\n                    key = compose(key, forHTML, [...parents, data]);\n\n                    if (key !== undefined) {\n                        value = compose(value, forHTML, [...parents, data]);\n                        forHTML ? map.set(key, value) : map.push([key, value]);\n                    }\n                });\n\n                return forHTML ? map : make(\"Map\", map);\n            } else if (data instanceof Set) {\n                let set = forHTML ? new Set() : [];\n\n                data.forEach((value) => {\n                    value = compose(value, forHTML, [...parents, data]);\n\n                    if (value !== undefined) {\n                        forHTML ? set.add(value) : set.push(value);\n                    }\n                });\n\n                return forHTML ? set : make(\"Set\", set);\n            } else if (data instanceof Error) {\n                // The native HTML Structured Clone Algorithm doesn't have the\n                // full support for Error types (that it omit all accompanying\n                // data), so we compose the error no matter what and decompose\n                // the data on the received end instead.\n                return make(\"Error\", compose(\n                    error2object(data),\n                    forHTML,\n                    [...parents, data]\n                ));\n            } else if (!forHTML && typeof (data = walkToJSON(data)) !== \"object\") {\n                return compose(data, forHTML, [...parents, data]);\n            } else if (Array.isArray(data)) {\n                return data.map(item => compose(item, forHTML, [...parents, data]));\n            } else {\n                let proto = Object.getPrototypeOf(data);\n\n                if (!forHTML || proto === null || proto === Object.prototype) {\n                    return Object.keys(data).reduce((obj, key) => {\n                        let value = compose(data[key], forHTML, [...parents, data]);\n                        value !== undefined && (obj[key] = value);\n                        return obj;\n                    }, {});\n                } else {\n                    return data;\n                }\n            }\n        }\n\n        return data;\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction pick(obj, props) {\n    if (Array.isArray(obj)) {\n        return props.map(i => obj[i]);\n    }\n    else {\n        return props.reduce((result, prop) => {\n            prop in obj && (result[prop] = obj[prop]);\n            return result;\n        }, {});\n    }\n}\nexports.default = pick;\n//# sourceMappingURL=pick.js.map","module.exports = require(\"assert\");","const getGlobal = require(\"@hyurl/utils/getGlobal\").default;\nconst typeOf = require(\"@hyurl/utils/typeOf\").default;\nconst keysOf = require(\"@hyurl/utils/keysOf\").default;\nconst { object2error } = require(\"./utils\");\nconst NumberKeywords = [\"NaN\", \"Infinity\", \"-Infinity\"];\n\n/**\n * @param {(data: any) => { type: string, value: any }} parse \n * @param {(data: any) => boolean} checkSignature\n */\nexports.createDecomposer = function (parse, checkSignature) {\n    return function decompose(data) {\n        if (typeof data !== \"object\" || data === null) {\n            return data;\n        } else if (checkSignature(data)) {\n            let { type, value } = parse(data);\n\n            try {\n                switch (type) {\n                    case \"Boolean\":\n                        return new Boolean(value);\n\n                    case \"Number\":\n                        return NumberKeywords.includes(value)\n                            ? Number(value)\n                            : new Number(value);\n\n                    case \"BigInt\":\n                        return BigInt(value);\n\n                    case \"String\":\n                        return new String(value);\n\n                    case \"Date\":\n                        return new Date(value);\n\n                    case \"RegExp\": {\n                        let index = value.lastIndexOf(\"/\");\n                        let pattern = value.slice(1, index);\n                        let flags = value.slice(index + 1);\n                        return new RegExp(pattern, flags);\n                    }\n\n                    case \"Map\":\n                        return new Map(decompose(value));\n\n                    case \"Set\":\n                        return new Set(decompose(value));\n\n                    case \"Error\":\n                        return object2error(value);\n\n                    case \"ArrayBuffer\":\n                        return Uint8Array.from(value).buffer;\n\n                    case \"DataView\":\n                        return new DataView(Uint8Array.from(value).buffer);\n\n                    case \"Buffer\": {\n                        if (typeof Buffer === \"function\") {\n                            return Buffer.from(value);\n                        } else {\n                            // For browsers, transfer Node.js Buffer into\n                            // Uint8Array.\n                            return Uint8Array.from(value);\n                        }\n                    }\n\n                    case \"Int8Array\":\n                    case \"Uint8Array\":\n                    case \"Uint8ClampedArray\":\n                    case \"Int16Array\":\n                    case \"Uint16Array\":\n                    case \"Int32Array\":\n                    case \"Uint32Array\":\n                    case \"BigInt64Array\":\n                    case \"BigUint64Array\":\n                    case \"Float32Array\":\n                    case \"Float64Array\":\n                        return getGlobal(type).from(value);\n\n                    default:\n                        return data;\n                }\n            } catch (e) {\n                // If failed to decompose, return the data as-is.\n                return data;\n            }\n        } else if (Array.isArray(data)) {\n            return data.map(decompose);\n        } else if (typeOf(data) === Object) {\n            return keysOf(data).reduce((obj, key) => {\n                obj[key] = decompose(data[key]);\n                return obj;\n            }, {});\n        } else {\n            return data;\n        }\n    }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isVoid_1 = require(\"./isVoid\");\nconst could_be_class_1 = require(\"could-be-class\");\n/**\n * Returns a string representation or the constructor of the value's type.\n * NOTE: this function also returns `'void'` when testing `NaN`.\n */\nfunction typeOf(target) {\n    if (arguments.length === 0)\n        throw new TypeError(\"1 argument is required, 0 given\");\n    else if (isVoid_1.default(target))\n        return \"void\";\n    let type = typeof target;\n    if (type === \"function\") {\n        if (could_be_class_1.default(target)) {\n            return \"class\";\n        }\n        else {\n            return \"function\";\n        }\n    }\n    else if (type === \"object\") {\n        if (Object.prototype.toString.call(target) === \"[object Arguments]\") {\n            return \"arguments\";\n        }\n        else {\n            return target.constructor || Object;\n        }\n    }\n    else {\n        return type;\n    }\n}\nexports.default = typeOf;\n//# sourceMappingURL=typeOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Checks if a value is resolved to void (`null`, `undefined` or `NaN`).\n */\nfunction isVoid(value) {\n    return value === null || value === undefined || Object.is(value, NaN);\n}\nexports.default = isVoid;\n//# sourceMappingURL=isVoid.js.map","\"use strict\";\n\n/**\n * Checks if an object could be an instantiable class.\n * @param {any} obj\n * @returns {obj is new (...args: any[]) => any}\n */\nfunction couldBeClass(obj) {\n    if (typeof obj != \"function\") return false;\n\n    // async function or arrow function\n    if (obj.prototype === undefined)\n        return false;\n\n    // generator function and malformed inheritance\n    if (obj.prototype.constructor !== obj)\n        return false;\n\n    // has own prototype properties\n    if (Object.getOwnPropertyNames(obj.prototype).length >= 2)\n        return true;\n\n    var str = String(obj);\n\n    // ES6 class\n    if (str.slice(0, 5) == \"class\")\n        return true;\n\n    // anonymous function\n    if (/^function\\s*\\(|^function anonymous\\(/.test(str))\n        return false;\n\n    var hasThis = /(call|apply|_classCallCheck)\\(this(, arguments)?\\)|\\bthis(.\\S+|\\[.+?\\])\\s*(=|\\()|=\\s*this[,;]/.test(str);\n\n    // Upper-cased first char of the name and has `this` in the body, or it's\n    // a native class in ES5 style.\n    if (/^function\\s+[A-Z]/.test(str) && (hasThis ||\n        (/\\[native code\\]/.test(str) &&\n            obj.name !== \"BigInt\" && // ES6 BigInt and Symbol is not class\n            obj.name !== \"Symbol\"\n        )\n    )) {\n        return true;\n    }\n\n    // TypeScript anonymous class to ES5 with default export\n    if (hasThis && obj.name === \"default_1\")\n        return true;\n\n    return false;\n}\n\nexports.couldBeClass = couldBeClass;\nexports.default = couldBeClass;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction keysOf(obj) {\n    if (Array.isArray(obj)) {\n        return Object.keys(obj).map(Number);\n    }\n    else {\n        return Reflect.ownKeys(obj);\n    }\n}\nexports.default = keysOf;\n//# sourceMappingURL=keysOf.js.map"],"sourceRoot":""}